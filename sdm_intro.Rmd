---
title: "Intro to species distribution modelling"
author: "Petr Keil"
date: "November 27, 2018"
output: 
  html_document: 
    highlight: tango
    theme: cerulean
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Introduction

Parts of this class are loosely based on [this intro](https://cran.r-project.org/web/packages/dismo/vignettes/sdm.pdf) to ```dismo``` package by Robert Hijmans and Jane Elith.


# Loading the data and packages

```{r, message=FALSE, warning=FALSE}
library(dismo) # package for species distribution modelling
library(maptools); data(wrld_simpl) # world boundaries
library(sp) # package for vector layers
library(rgeos)
library(raster) # package for raster layers


list.files(path=paste(system.file(package="dismo")), '/ex', sep='')), pattern='grd', full.names=TRUE )



```


All data that you will need for this exercise can be found here.

The environmental data are from WorldClim:
```getData('bioclim', res=0.5, lon=5, lat=45)```

```{r}
load("data/Solanum.Rdata") # load the main data
objects() # examine what we've loaded
```

Let's convert the lat-long point data to ```spatialPoints``` class

```{r}
Solanum <- SpatialPoints(coords = solanum, proj4string = CRS(proj4string(sa)))

```


## Plot the data
```{r}
plot(Solanum)
plot(wrld_simpl, add=TRUE)
```


# Absences, pseudo-absences, background

```{r}
Sol.circ <- circles(Solanum, d = 50000, lonlat = TRUE)
Sol.poly <- polygons(Sol.circ)
pseudo.abs <- spsample(Sol.poly, n = 250, type="random", iter=25)

```


# Simple presence-only model

# Presence-absence model